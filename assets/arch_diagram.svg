<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- AWS Cloud Border -->
  <rect x="50" y="50" width="1100" height="700" fill="none" stroke="#232F3E" stroke-width="3" rx="10"/>
  <text x="70" y="85" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#232F3E">AWS Cloud</text>
  
  <!-- AWS Logo -->
  <rect x="60" y="60" width="40" height="30" fill="#232F3E" rx="3"/>
  <text x="67" y="80" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#FF9900">aws</text>
  
  <!-- User Icon -->
  <circle cx="120" cy="400" r="35" fill="#5A6C7D" opacity="0.3"/>
  <circle cx="120" cy="385" r="15" fill="#232F3E"/>
  <path d="M 95 420 Q 95 400 120 400 Q 145 400 145 420 L 145 435 Q 145 445 120 445 Q 95 445 95 435 Z" fill="#232F3E"/>
  <text x="120" y="490" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#232F3E">User</text>
  
  <!-- Upload Icon -->
  <circle cx="120" cy="280" r="25" fill="#3B48CC" opacity="0.2"/>
  <path d="M 120 265 L 120 290" stroke="#3B48CC" stroke-width="3" fill="none"/>
  <path d="M 110 275 L 120 265 L 130 275" stroke="#3B48CC" stroke-width="3" fill="none"/>
  
  <!-- Arrow from User to Upload -->
  <path d="M 120 360 L 120 310" stroke="#232F3E" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Image File (original) -->
  <rect x="240" y="240" width="80" height="100" fill="#3B48CC" opacity="0.1" stroke="#3B48CC" stroke-width="2" rx="5"/>
  <rect x="250" y="250" width="60" height="5" fill="#3B48CC" opacity="0.3"/>
  <rect x="250" y="260" width="60" height="5" fill="#3B48CC" opacity="0.3"/>
  <rect x="250" y="270" width="40" height="5" fill="#3B48CC" opacity="0.3"/>
  <rect x="250" y="290" width="60" height="40" fill="#3B48CC" opacity="0.2"/>
  <text x="280" y="360" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#232F3E">image.jpg</text>
  
  <!-- Arrow from Upload to Image -->
  <path d="M 145 280 L 235 280" stroke="#232F3E" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- S3 Source Bucket -->
  <rect x="380" y="220" width="180" height="140" fill="#569A31" rx="5"/>
  <ellipse cx="470" cy="245" rx="60" ry="15" fill="#7CB342"/>
  <path d="M 410 245 Q 410 260 470 260 Q 530 260 530 245" fill="none" stroke="#F8F8F8" stroke-width="2"/>
  <path d="M 420 270 L 440 285" stroke="#F8F8F8" stroke-width="2"/>
  <path d="M 480 270 L 500 285" stroke="#F8F8F8" stroke-width="2"/>
  <text x="470" y="330" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#FFFFFF">S3 Source</text>
  <text x="470" y="350" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#FFFFFF">Bucket</text>
  
  <!-- Arrow from Image to S3 -->
  <path d="M 325 280 L 375 280" stroke="#232F3E" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- S3 Event Trigger (dotted line) -->
  <path d="M 470 365 L 470 445" stroke="#FF9900" stroke-width="2" stroke-dasharray="5,5" fill="none"/>
  <text x="485" y="410" font-family="Arial, sans-serif" font-size="12" fill="#FF9900">ObjectCreated</text>
  
  <!-- Lambda Function -->
  <rect x="380" y="450" width="180" height="140" fill="#FF9900" rx="5"/>
  <path d="M 430 490 L 470 520 L 510 490 L 510 540 L 470 570 L 430 540 Z" fill="#FFFFFF"/>
  <text x="470" y="610" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#FFFFFF">Lambda</text>
  <text x="470" y="630" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#FFFFFF">resize_function</text>
  
  <!-- Pillow Layer -->
  <rect x="600" y="470" width="120" height="50" fill="#FF9900" opacity="0.3" stroke="#FF9900" stroke-width="2" rx="5"/>
  <text x="660" y="500" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#FF9900" font-weight="bold">Pillow Layer</text>
  
  <!-- Arrow from Lambda to Layer -->
  <path d="M 565 500 L 595 500" stroke="#FF9900" stroke-width="2" stroke-dasharray="5,5" fill="none"/>
  
  <!-- S3 Output Bucket -->
  <rect x="720" y="450" width="180" height="140" fill="#569A31" rx="5"/>
  <ellipse cx="810" cy="475" rx="60" ry="15" fill="#7CB342"/>
  <path d="M 750 475 Q 750 490 810 490 Q 870 490 870 475" fill="none" stroke="#F8F8F8" stroke-width="2"/>
  <path d="M 760 500 L 780 515" stroke="#F8F8F8" stroke-width="2"/>
  <path d="M 820 500 L 840 515" stroke="#F8F8F8" stroke-width="2"/>
  <text x="810" y="560" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#FFFFFF">S3 Output</text>
  <text x="810" y="580" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#FFFFFF">Bucket</text>
  
  <!-- Arrow from Lambda to Output Bucket -->
  <path d="M 565 520 L 715 520" stroke="#232F3E" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Resized Image File -->
  <rect x="950" y="470" width="80" height="100" fill="#3B48CC" opacity="0.1" stroke="#3B48CC" stroke-width="2" rx="5"/>
  <rect x="960" y="480" width="60" height="5" fill="#3B48CC" opacity="0.3"/>
  <rect x="960" y="490" width="60" height="5" fill="#3B48CC" opacity="0.3"/>
  <rect x="960" y="500" width="40" height="5" fill="#3B48CC" opacity="0.3"/>
  <rect x="960" y="520" width="60" height="40" fill="#3B48CC" opacity="0.2"/>
  <text x="990" y="585" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#232F3E">resized-</text>
  <text x="990" y="600" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#232F3E">image.jpg</text>
  
  <!-- Arrow from Output to Resized -->
  <path d="M 905 520 L 945 520" stroke="#232F3E" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- IAM Role -->
  <rect x="380" y="650" width="100" height="80" fill="#DD344C" opacity="0.1" stroke="#DD344C" stroke-width="2" rx="5"/>
  <rect x="395" y="670" width="20" height="15" fill="#DD344C" opacity="0.3"/>
  <rect x="420" y="670" width="20" height="15" fill="#5CB85C" opacity="0.5"/>
  <rect x="445" y="670" width="20" height="15" fill="#DD344C" opacity="0.3"/>
  <text x="430" y="705" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#DD344C" font-weight="bold">IAM Role</text>
  <text x="430" y="720" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#232F3E">& Policy</text>
  
  <!-- AssumeRole arrow -->
  <path d="M 430 650 L 450 595" stroke="#DD344C" stroke-width="2" stroke-dasharray="5,5" fill="none"/>
  <text x="440" y="630" font-family="Arial, sans-serif" font-size="11" fill="#DD344C">AssumeRole</text>
  
  <!-- CloudWatch Logs -->
  <rect x="650" y="650" width="120" height="80" fill="#E7157B" opacity="0.1" stroke="#E7157B" stroke-width="2" rx="5"/>
  <circle cx="710" cy="675" r="8" fill="none" stroke="#E7157B" stroke-width="2"/>
  <path d="M 718 675 L 730 675" stroke="#E7157B" stroke-width="2"/>
  <rect x="665" y="695" width="30" height="3" fill="#E7157B" opacity="0.5"/>
  <rect x="665" y="702" width="30" height="3" fill="#E7157B" opacity="0.5"/>
  <rect x="665" y="709" width="20" height="3" fill="#E7157B" opacity="0.5"/>
  <text x="710" y="730" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#E7157B" font-weight="bold">CloudWatch</text>
  <text x="710" y="745" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#232F3E">Logs</text>
  
  <!-- Arrow from Lambda to CloudWatch -->
  <path d="M 540 590 L 655 665" stroke="#E7157B" stroke-width="2" fill="none" marker-end="url(#arrowhead2)"/>
  
  <!-- Arrow marker definitions -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#232F3E"/>
    </marker>
    <marker id="arrowhead2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#E7157B"/>
    </marker>
  </defs>
</svg>